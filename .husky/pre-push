#!/bin/sh

# Quick smoke test before push - just run tests without coverage to catch obvious issues
echo "Running quick smoke test before push..."

echo "Running frontend tests..."
npm run test
if [ $? -ne 0 ]; then
  echo "Frontend tests failed. Aborting push."
  exit 1
fi

echo "Running server tests..."
cd server && npm run test
if [ $? -ne 0 ]; then
  echo "Server tests failed. Aborting push."
  exit 1
fi
cd ..

echo "Smoke test passed. Push allowed."
exit 0
